<mat-card [ngClass]="{disconnected: !device.isConnected}">
  <mat-card-header>
    <div class="info">
      <mat-icon color="warn" *ngIf="!device.isConnected" title="Disconnected">power_off</mat-icon>
      <button mat-icon-button [routerLink]="['..', 'device', device.id]">
        <mat-icon>info_outlined</mat-icon>
      </button>
    </div>
    <mat-card-title>
      <sh-core-inline-edit [name]="device.name"
                           [renameError$]="getDeviceRenameErrorEffect()"
                           [renameSuccess$]="getDeviceRenameSuccessEffect()"
                           [maxLength]="35"
                           (onRename)="rename($event)"></sh-core-inline-edit>
    </mat-card-title>
  </mat-card-header>
  <mat-divider></mat-divider>
  <mat-card-content>
    <sh-switch-status *ngFor="let outlet of device.switches.keys()"
                      [isEnabled]="device.isConnected"
                      [deviceId]="device.id"
                      [switchModel]="device.switches.get(outlet)"
                      (onRename)="renameSwitch(outlet, $event)"
                      (change)="toggle($event)"></sh-switch-status>
  </mat-card-content>
  <mat-divider></mat-divider>
  <mat-card-actions *ngIf="!device.isSingleSwitch">
    <sh-device-on-off [isEnabled]="device.isConnected" (toggle)="onOff($event)"></sh-device-on-off>
  </mat-card-actions>
</mat-card>
